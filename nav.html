<nav id="navbar">
    <div class="nav-container">
        <a href="index.html#top" class="logo"> 
            <picture>
                <source srcset="assets/Mattis_Foundation_Logo_Blue.webp" type="image/webp">
                <img src="assets/Mattis_Foundation_Logo_Blue.png" 
                     alt="Mattis Foundation Logo" 
                     width="50" 
                     height="50"
                     style="height: 50px !important; width: auto !important; max-width: 80px !important; object-fit: contain !important;">
            </picture>
        </a>
        <ul class="nav-links">
            <li><a href="index.html#top">Home</a></li>
            <li><a href="index.html#about">About</a></li>
            <li><a href="programs.html">Programs</a></li>
            <li><a href="index.html#impact">Impact</a></li>
            <li><a href="index.html#contact">Contact</a></li>
        </ul>
        <button class="hamburger" id="hamburger" aria-label="Toggle navigation menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</nav>

<!-- Mobile Navigation Overlay -->
<div class="mobile-nav" id="mobileNav">
    <ul class="mobile-nav-links">
        <li><a href="index.html#top">Home</a></li>
        <li><a href="index.html#about">About</a></li>
        <li><a href="programs.html">Programs</a></li>
        <li><a href="index.html#impact">Impact</a></li>
        <li><a href="index.html#contact">Contact</a></li>
    </ul>
</div>

<!-- HAMBURGER MENU SCRIPT - Initialize immediately -->
<script>
(function() {
    // Wait for elements to be available
    function initHamburger() {
        const hamburger = document.getElementById('hamburger');
        const mobileNav = document.getElementById('mobileNav');
        const body = document.body;
        
        if (!hamburger || !mobileNav) {
            console.log('Hamburger elements not ready, retrying...');
            setTimeout(initHamburger, 100);
            return;
        }
        
        console.log('Initializing hamburger menu...');
        
        function toggleMobileNav(e) {
            if (e) e.preventDefault();
            
            const isActive = hamburger.classList.contains('active');
            hamburger.classList.toggle('active');
            mobileNav.classList.toggle('active');
            
            if (!isActive) {
                body.style.overflow = 'hidden';
                mobileNav.setAttribute('aria-hidden', 'false');
                hamburger.setAttribute('aria-expanded', 'true');
                console.log('Mobile nav opened');
            } else {
                body.style.overflow = '';
                mobileNav.setAttribute('aria-hidden', 'true');
                hamburger.setAttribute('aria-expanded', 'false');
                console.log('Mobile nav closed');
            }
        }
        
        function closeMobileNav() {
            hamburger.classList.remove('active');
            mobileNav.classList.remove('active');
            body.style.overflow = '';
            mobileNav.setAttribute('aria-hidden', 'true');
            hamburger.setAttribute('aria-expanded', 'false');
        }
        
        // Remove any existing listeners
        hamburger.removeEventListener('click', toggleMobileNav);
        
        // Add event listeners
        hamburger.addEventListener('click', toggleMobileNav);
        
        // Close on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && mobileNav.classList.contains('active')) {
                closeMobileNav();
            }
        });
        
        // Close when clicking nav links
        const mobileNavLinks = mobileNav.querySelectorAll('.mobile-nav-links a');
        mobileNavLinks.forEach(link => {
            link.addEventListener('click', closeMobileNav);
        });
        
        // Close when clicking overlay
        mobileNav.addEventListener('click', function(e) {
            if (e.target === mobileNav) {
                closeMobileNav();
            }
        });
        
        // Set initial ARIA attributes
        mobileNav.setAttribute('aria-hidden', 'true');
        hamburger.setAttribute('aria-expanded', 'false');
        hamburger.setAttribute('aria-label', 'Toggle navigation menu');
        
        console.log('Hamburger menu initialized successfully!');
    }
    
    // Start initialization
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initHamburger);
    } else {
        initHamburger();
    }
})();
</script>

<!-- HAMBURGER ANIMATION CSS -->
<style>
/* Hamburger animations - inline to ensure they work */
.hamburger.active span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px) !important;
}

.hamburger.active span:nth-child(2) {
    opacity: 0 !important;
}

.hamburger.active span:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -6px) !important;
}

/* Logo fix - inline to override any other CSS */
.logo {
    min-width: 50px !important;
    height: 50px !important;
    width: auto !important;
}

.logo img {
    height: 50px !important;
    width: auto !important;
    max-width: 80px !important;
    object-fit: contain !important;
}

/* Mobile responsive logo */
@media (max-width: 768px) {
    .logo {
        min-width: 42px !important;
        height: 42px !important;
    }
    
    .logo img {
        height: 42px !important;
        max-width: 65px !important;
    }
}

@media (max-width: 480px) {
    .logo {
        min-width: 36px !important;
        height: 36px !important;
    }
    
    .logo img {
        height: 36px !important;
        max-width: 55px !important;
    }
}
</style>