<!DOCTYPE html>
<html lang="en" id="top">
<head>
    <!-- Meta Description -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <!-- Security Headers via Meta (Server headers are preferred) -->
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <meta name="description" content="The Mattis Foundation creates meaningful opportunities through scholarships, community disaster relief, and the KJ Smith Scholarship. Supporting veterans and communities with honor, resilience, and service since 2024.">
    <meta name="keywords" content="Mattis Foundation, KJ Smith Scholarship, scholarships, community disaster relief, nonprofit foundation, Evening Under the Oaks, military family support, North Carolina charity, disaster relief fund, education scholarships, community service, honor resilience service">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://mattisfoundation.org/">

    <!-- Open Graph (for social media sharing) -->
    <meta property="og:title" content="The Mattis Foundation - Creating Opportunity Through Honor, Resilience, and Service">
    <meta property="og:description" content="Supporting veterans, military families, and communities through the KJ Smith Scholarship, disaster relief, and community programs. Join us in making a difference.">
    <meta property="og:image" content="https://mattisfoundation.org/assets/Mattis_Foundation_Logo_Blue.png">
    <meta property="og:url" content="https://mattisfoundation.org">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="The Mattis Foundation">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="The Mattis Foundation - Supporting Veterans & Communities">
    <meta name="twitter:description" content="Creating opportunity through honor, resilience, and service. KJ Smith Scholarship, disaster relief, and community programs.">
    <meta property="twitter:image" content="https://mattisfoundation.org/assets/Mattis_Foundation_Logo_Blue.png">

    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow">
    <meta name="author" content="The Mattis Foundation">
    <meta name="theme-color" content="#2c3e50">

    <title>The Mattis Foundation - Scholarships & Community Relief | KJ Smith Scholarship</title>
    
    <!-- Optimized Favicon -->
    <link rel="icon" type="image/webp" href="assets/Mattis_Foundation_Favicon.webp">
    <link rel="icon" type="image/png" href="assets/Mattis_Foundation_Favicon.png">
    
    <!-- CRITICAL PERFORMANCE OPTIMIZATIONS -->
    
    <!-- 1. FONT OPTIMIZATION - Eliminate render blocking -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Critical font preload -->
    <link rel="preload" href="https://fonts.gstatic.com/s/georgia/v3/9Bt33CxNwt7aOtW_uoQ.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- 2. CRITICAL RESOURCE PRELOADS - Hero content with reserved space -->
    <link rel="preload" href="assets/Adam&Jenelle1-mobile.webp" as="image" type="image/webp" media="(max-width: 768px)" fetchpriority="high">
    <link rel="preload" href="assets/Adam&Jenelle1.webp" as="image" type="image/webp" media="(min-width: 769px)" fetchpriority="high">
    
    <!-- 3. CRITICAL CSS with layout shift prevention -->
    <style>
        /* CRITICAL CSS - Inline for fastest render */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Georgia, serif;
            line-height: 1.6;
            color: #333;
            overflow-x: hidden;
        }

        /* LAYOUT SHIFT PREVENTION - Reserve space for dynamic content */
        #navigation {
            height: 78px; /* Reserve exact space for nav */
            position: relative;
        }

        /* Navigation - Critical since it's fixed */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 1rem 0;
            transition: all 0.3s ease;
            height: 78px; /* Fixed height to prevent shifts */
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
            height: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        .logo img {
            height: 50px;
            width: 50px; /* Explicit width to prevent shifts */
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 8px;
            background: none;
            border: none;
            z-index: 1001;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: #2c3e50;
            margin: 3px 0;
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        /* HERO SECTION - LAYOUT SHIFT PREVENTION */
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
            /* Reserve space for content to prevent shifts */
            min-height: 600px;
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .hero-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.6);
            /* Explicit dimensions to prevent layout shifts */
            aspect-ratio: 3/2;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(44, 62, 80, 0.1);
            z-index: 2;
        }

        .hero-content {
            max-width: 800px;
            padding: 2rem;
            z-index: 3;
            position: relative;
            /* Reserve space to prevent CLS */
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
            /* Prevent font swap CLS */
            font-display: swap;
        }

        .hero .tagline {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.95;
        }

        .cta-button {
            display: inline-block;
            background: #e74c3c;
            color: white;
            padding: 1rem 2rem;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            transition: all 0.3s ease;
            /* Explicit dimensions to prevent layout shifts */
            width: fit-content;
            margin: 0 auto;
        }

        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(44, 62, 80, 0.98);
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-100%);
            transition: all 0.4s ease;
        }

        .mobile-nav.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .mobile-nav-links {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            list-style: none;
        }

        .mobile-nav-links a {
            color: white;
            font-size: 1.5rem;
            text-decoration: none;
            font-weight: 500;
            padding: 1rem 2rem;
            border-radius: 8px;
        }

        /* MOBILE RESPONSIVE - Critical viewport optimizations */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hamburger {
                display: flex;
            }
            
            .nav-container {
                padding: 0 1rem;
            }
            
            .logo img {
                height: 42px;
                width: 42px;
            }
            
            .hero h1 {
                font-size: 2.3rem;
                line-height: 1.2;
            }
            
            .hero .tagline {
                font-size: 1.05rem;
            }
            
            .hero-content {
                padding: 1rem;
                min-height: 250px;
            }
            
            .cta-button {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
            }

            #navigation {
                height: 66px; /* Smaller on mobile */
            }

            nav {
                height: 66px;
            }
        }

        /* Reduce motion for accessibility and performance */
        @media (prefers-reduced-motion: reduce) {
            * {
                transition: none !important;
                animation: none !important;
            }
        }

        /* Scholarship button styles */
        .scholarship-button {
            background: #e74c3c;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
            margin-top: 20px;
        }

        .scholarship-button:hover {
            background: #c0392b;
            transform: translateY(-2px);
            color: white;
        }

        .program-card-content {
            text-align: center;
        }

        .program-card-content h3 {
            text-align: center;
            margin-bottom: 1.5rem;
        }
    </style>
    
    <!-- 4. DNS PREFETCH - Only essential -->
    <link rel="dns-prefetch" href="//www.googletagmanager.com">
    
    <!-- 5. NON-CRITICAL CSS - Deferred loading -->
    <link rel="preload" href="css/main.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="css/main.css"></noscript>
    
    <!-- 6. FONT LOADING - Optimized with display swap -->
    <link href="https://fonts.googleapis.com/css2?family=Georgia:wght@400;500;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Georgia:wght@400;500;700&display=swap" rel="stylesheet"></noscript>

    <!-- Structured Data - Optimized -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "The Mattis Foundation",
        "url": "https://mattisfoundation.org",
        "logo": "https://mattisfoundation.org/assets/Mattis_Foundation_Logo_Blue.png",
        "description": "The Mattis Foundation creates meaningful opportunities through scholarships, community disaster relief, and events, emphasizing honor, resilience, and service.",
        "foundingDate": "2024",
        "contactPoint": {
            "@type": "ContactPoint",
            "email": "amm@mattisfoundation.org",
            "contactType": "General Inquiry"
        },
        "sameAs": [
            "https://www.instagram.com/themattisfoundation/",
            "https://www.linkedin.com/company/the-mattis-foundation/"
        ],
        "address": {
            "@type": "PostalAddress",
            "addressRegion": "North Carolina",
            "addressCountry": "US"
        }
    }
    </script>

    <!-- 7. ANALYTICS - Deferred loading to prevent blocking -->
    <script>
      // Defer Google Analytics loading
      window.addEventListener('load', function() {
        setTimeout(function() {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-K7W9R2DZQ5', {
            page_load_time: true,
            anonymize_ip: true
          });
          
          var script = document.createElement('script');
          script.async = true;
          script.src = 'https://www.googletagmanager.com/gtag/js?id=G-K7W9R2DZQ5';
          document.head.appendChild(script);
        }, 1000); // Load after 1 second
      });
    </script>
</head>

<body>
    <!-- Navigation will be loaded here - Reserved space prevents CLS -->
    <div id="navigation"></div>

    <section id="home" class="hero">
        <picture class="hero-bg">
            <source srcset="assets/Adam&Jenelle1-mobile.webp" media="(max-width: 768px)" type="image/webp">
            <source srcset="assets/Adam&Jenelle1-mobile.jpg" media="(max-width: 768px)" type="image/jpeg">
            <source srcset="assets/Adam&Jenelle1.webp" type="image/webp">
            <img src="assets/Adam&Jenelle1.jpg" 
                 alt="The Mattis Foundation founders Adam and Jenelle" 
                 class="hero-img" 
                 width="1200" 
                 height="800"
                 fetchpriority="high"
                 decoding="sync">
        </picture>
        <div class="hero-content">
            <h1>The Mattis Foundation</h1>
            <p class="tagline">Creating opportunity through honor, resilience, and service</p>
            <a href="#programs" class="cta-button">Explore Our Programs</a>
        </div>
    </section>

    <section id="about" class="section about">
        <div class="container">
            <h2 class="section-title">About Our Mission</h2>
            <div class="about-content">
                <p>The Mattis Foundation is dedicated to creating meaningful opportunities for individuals and communities through the core values of honor, resilience, and service. We believe that by fostering these principles, we can build stronger communities and empower people to reach their full potential.</p>
                <p>Our foundation works tirelessly to provide educational opportunities through the KJ Smith Scholarship, community disaster relief support, and transformative experiences that make a lasting impact on the lives of veterans, military families, and communities we serve.</p>
            </div>
        </div>
    </section>

    <section id="programs" class="section">
        <div class="container">
            <h2 class="section-title">Our Programs</h2>
            <div class="programs-grid">
                <article class="program-card community-fund-card">
                    <div class="program-card-image">
                        <picture>
                            <source srcset="assets/helene.webp" type="image/webp">
                            <img src="assets/helene.jpg" 
                                 alt="Community disaster relief efforts" 
                                 loading="lazy" 
                                 width="400" 
                                 height="250"
                                 decoding="async">
                        </picture>
                    </div>
                    <div class="program-card-content">
                        <h3>Community Fund</h3>
                        <p>Supporting communities in times of need through disaster relief, emergency assistance, and rebuilding efforts. We stand ready to help when crisis strikes, providing immediate aid and long-term recovery support.</p>
                    </div>
                </article>
                <article class="program-card scholarship-card">
                    <div class="program-card-image">
                        <picture>
                            <source srcset="assets/kjsmith.webp" type="image/webp">
                            <img src="assets/kjsmith.jpeg" 
                                 alt="KJ Smith Scholarship recipient" 
                                 loading="lazy" 
                                 width="400" 
                                 height="250"
                                 decoding="async">
                        </picture>
                    </div>
                    <div class="program-card-content">
                        <h3>KJ Smith Scholarship</h3>
                        <p>Honoring military families and veterans by providing educational opportunities to deserving students who demonstrate exceptional character and commitment to service. Supporting the next generation of leaders.</p>
                        <a href="scholarship-application.html" class="scholarship-button">Apply Now</a>
                    </div>
                </article>
                <article class="program-card evening-oaks-card">
                    <div class="program-card-image">
                        <picture>
                            <source srcset="assets/undertheoaks.webp" type="image/webp">
                            <img src="assets/undertheoaks.jpg" 
                                 alt="Evening Under the Oaks event" 
                                 loading="lazy" 
                                 width="400" 
                                 height="250"
                                 decoding="async">
                        </picture>
                    </div>
                    <div class="program-card-content">
                        <h3>Evening Under the Oaks</h3>
                        <p>Our signature annual fundraising event bringing together community members for an elegant evening of connection, celebration, and support for our mission. Join us in making a difference.</p>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <section id="gallery" class="section gallery">
        <div class="container">
            <h2 class="section-title">Our Community Impact</h2>
            <div class="gallery-grid">
                <div class="gallery-item venue-gallery">
                    <picture>
                        <source srcset="assets/westpoint.webp" type="image/webp">
                        <img src="assets/westpoint.jpg" 
                             alt="Elegant venues and events" 
                             loading="lazy" 
                             width="300" 
                             height="250"
                             decoding="async">
                    </picture>
                    <div class="gallery-caption">Elegant Venues & Events</div>
                </div>
                <div class="gallery-item cityscape-gallery">
                    <picture>
                        <source srcset="assets/raleigh2.webp" type="image/webp">
                        <img src="assets/raleigh2.jpg" 
                             alt="Serving North Carolina communities" 
                             loading="lazy" 
                             width="300" 
                             height="250"
                             decoding="async">
                    </picture>
                    <div class="gallery-caption">Serving North Carolina</div>
                </div>
                <div class="gallery-item historic-gallery">
                    <picture>
                        <source srcset="assets/westpoint.webp" type="image/webp">
                        <img src="assets/westpoint.jpg" 
                             alt="Historic partnerships" 
                             loading="lazy" 
                             width="300" 
                             height="250"
                             decoding="async">
                    </picture>
                    <div class="gallery-caption">Historic Partnerships</div>
                </div>
            </div>
        </div>
    </section>

    <section id="impact" class="section impact">
        <div class="container">
            <h2 class="section-title">Our Impact</h2>
            <div class="impact-stats">
                <div class="stat-item">
                    <div class="stat-number">1000+</div>
                    <div class="stat-label">Lives Touched</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">2</div>
                    <div class="stat-label">Scholarships Awarded</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">10+</div>
                    <div class="stat-label">Community Projects</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">$150K</div>
                    <div class="stat-label">Funds Distributed</div>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="section contact">
        <div class="container">
            <h2 class="section-title">Get Involved</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <h3>Connect With Us</h3>
                    <p>Ready to make a difference? Whether you're interested in applying for the KJ Smith Scholarship, want to volunteer, or would like to make a donation, we'd love to hear from you.</p>
                    <p><strong>Follow us:</strong></p>
                    <div class="social-links">
                        <a href="https://www.instagram.com/themattisfoundation/" target="_blank" rel="noopener noreferrer" aria-label="Follow us on Instagram">
                            <picture>
                                <source srcset="assets/logo_instagram.webp" type="image/webp">
                                <img src="assets/logo_instagram.png" alt="Instagram" width="40" height="40" loading="lazy" decoding="async">
                            </picture>
                        </a>
                        <a href="https://www.linkedin.com/company/the-mattis-foundation/" target="_blank" rel="noopener noreferrer" aria-label="Connect on LinkedIn">
                            <picture>
                                <source srcset="assets/logo_linkedin.webp" type="image/webp">
                                <img src="assets/logo_linkedin.png" alt="LinkedIn" width="40" height="40" loading="lazy" decoding="async">
                            </picture>
                        </a>
                    </div>
                </div>
                <form class="contact-form" action="mailto:amm@mattisfoundation.org" method="post" enctype="text/plain">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="message">Message</label>
                        <textarea id="message" name="message" rows="5" required placeholder="Tell us about your interest in our programs, scholarship applications, or how you'd like to get involved..."></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Send Message</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer will be loaded here -->
    <div id="footer"></div>

    <!-- OPTIMIZED SCRIPT LOADING -->
    <script>
        // PERFORMANCE: Fast navigation loading with CLS prevention
        function loadNavigation() {
            fetch('nav.html')
                .then(response => response.text())
                .then(data => {
                    const navContainer = document.getElementById('navigation');
                    navContainer.innerHTML = data;
                    
                    // Initialize immediately to prevent delays
                    setTimeout(initializeNavigation, 50);
                })
                .catch(error => {
                    console.error('Error loading navigation:', error);
                });
        }

        function initializeNavigation() {
            const hamburger = document.getElementById('hamburger');
            const mobileNav = document.getElementById('mobileNav');
            const body = document.body;
            
            if (!hamburger || !mobileNav) {
                console.warn('Navigation elements not found');
                return;
            }
            
            function toggleMobileNav(e) {
                if (e) e.preventDefault();
                
                const isActive = hamburger.classList.contains('active');
                hamburger.classList.toggle('active');
                mobileNav.classList.toggle('active');
                
                if (!isActive) {
                    body.style.overflow = 'hidden';
                    mobileNav.setAttribute('aria-hidden', 'false');
                    hamburger.setAttribute('aria-expanded', 'true');
                } else {
                    body.style.overflow = '';
                    mobileNav.setAttribute('aria-hidden', 'true');
                    hamburger.setAttribute('aria-expanded', 'false');
                }
            }
            
            function closeMobileNav() {
                hamburger.classList.remove('active');
                mobileNav.classList.remove('active');
                body.style.overflow = '';
                mobileNav.setAttribute('aria-hidden', 'true');
                hamburger.setAttribute('aria-expanded', 'false');
            }
            
            // Event listeners
            hamburger.addEventListener('click', toggleMobileNav);
            
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && mobileNav.classList.contains('active')) {
                    closeMobileNav();
                }
            });
            
            const mobileNavLinks = mobileNav.querySelectorAll('.mobile-nav-links a');
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', closeMobileNav);
            });
            
            mobileNav.addEventListener('click', function(e) {
                if (e.target === mobileNav) {
                    closeMobileNav();
                }
            });
            
            // Set initial ARIA attributes
            mobileNav.setAttribute('aria-hidden', 'true');
            hamburger.setAttribute('aria-expanded', 'false');
            hamburger.setAttribute('aria-label', 'Toggle navigation menu');
        }

        // Load footer efficiently
        function loadFooter() {
            fetch('footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer').innerHTML = data;
                })
                .catch(error => console.log('Error loading footer:', error));
        }

        // PERFORMANCE: Load critical content immediately
        loadNavigation();
        loadFooter();
    </script>

    <!-- DEFERRED MAIN JS - Load after critical content -->
    <script src="js/main.js" defer></script>
    
    <!-- SERVICE WORKER - Enhanced caching -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('SW registered successfully');
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>